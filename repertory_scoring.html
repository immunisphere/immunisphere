<!DOCTYPE html>
<html>
<head>
<title>Repertory Scoring</title>
<style>
body { font-family:Arial; background:#f4f7fb; margin:0; }
.container { max-width:1000px; margin:30px auto; }
.card { background:white; padding:20px; border-radius:8px; margin-bottom:20px; box-shadow:0 4px 10px rgba(0,0,0,0.08); }
h2 { color:#0f6cab; margin-top:0; }
.remedy { padding:10px; border-bottom:1px solid #eee; }
.score { float:right; font-weight:bold; color:#2bb673; }
</style>
</head>
<body>

<div class="container">
<div class="card">
<h2>AI Repertory Scoring</h2>
<div id="rubricList"></div>
</div>

<div class="card">
<h2>Remedy Ranking</h2>
<div id="results"></div>
</div>
</div>

<script>
const rubrics = JSON.parse(localStorage.getItem("aiRubrics")) || [
"Head pain – throbbing","Worse motion","Better rest","Thirstless"
];

document.getElementById("rubricList").innerHTML = rubrics.map(r => "• "+r).join("<br>");

// Demo repertory database
const repertoryDB = {
"Bryonia": ["Worse motion","Better rest","Dryness"],
"Pulsatilla": ["Thirstless","Emotional","Better company"],
"Belladonna": ["Throbbing pain","Heat","Sudden onset"]
};

let scores = {};

rubrics.forEach(rubric => {
    for (let remedy in repertoryDB) {
        if (repertoryDB[remedy].some(r => rubric.toLowerCase().includes(r.toLowerCase()))) {
            scores[remedy] = (scores[remedy] || 0) + 2;
        }
    }
});

const sorted = Object.entries(scores).sort((a,b)=>b[1]-a[1]);

const resultsDiv = document.getElementById("results");
sorted.forEach(([remedy,score])=>{
    resultsDiv.innerHTML += `<div class="remedy">${remedy} <span class="score">${score}</span></div>`;
});
</script>

</body>
</html>
