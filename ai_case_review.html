<!DOCTYPE html>
<html>
<head>
<title>AI Case Review â€“ Doctor Panel</title>
<style>
body { margin:0; font-family:Arial, sans-serif; background:#f4f7fb; }
.topbar {
    background: linear-gradient(90deg,#0f6cab,#2bb673);
    color:white; padding:15px 25px;
    display:flex; justify-content:space-between; align-items:center;
    font-weight:bold;
}
.container { max-width:1200px; margin:25px auto; padding:0 20px; }
.card {
    background:white; padding:20px; border-radius:8px;
    box-shadow:0 4px 10px rgba(0,0,0,0.08); margin-bottom:20px;
}
h2 { margin-top:0; color:#0f6cab; }
.case-answer {
    border-left:4px solid #2bb673; padding-left:10px;
    margin-bottom:10px; font-size:14px;
}
textarea, input, select {
    width:100%; padding:8px; margin-top:6px;
    border-radius:4px; border:1px solid #ccc;
}
.btn {
    background:#2bb673; color:white; padding:10px 16px;
    border:none; border-radius:4px; margin-top:12px;
    cursor:pointer; font-weight:bold;
}
.warning {
    background:#fff4e5; padding:12px;
    border-left:4px solid orange; font-size:14px; margin-bottom:15px;
}
.rubric {
    background:#eef9f1; padding:6px 10px; border-radius:4px;
    display:inline-block; margin:4px; font-size:13px;
}
.remedy-box {
    background:#f1f7ff; padding:10px; border-radius:6px; margin-top:8px;
}
</style>
</head>
<body>

<div class="topbar">
    <div>ðŸ§  AI Case Review</div>
    <div>Dr. Sharma | <a href="login.html" style="color:white;">Logout</a></div>
</div>

<div class="container">

<div class="warning">
âš  AI-generated suggestions assist analysis. Final decision must be made by the doctor.
</div>

<div class="card">
    <h2>Patient Information</h2>
    <p><strong>Name:</strong> Riya Patel</p>
    <p><strong>Age:</strong> 29</p>
    <p><strong>Case Type:</strong> AI-Integrated Consultation</p>
</div>

<div class="card">
    <h2>Patient Answers</h2>
    <div id="aiAnswers"></div>
</div>

<div class="card">
    <h2>AI Case Summary</h2>
    <label>Chief Complaints</label><textarea id="chief"></textarea>
    <label>Mental State</label><textarea id="mental"></textarea>
    <label>Physical Generals</label><textarea id="physical"></textarea>
    <label>Modalities</label><textarea id="modalities"></textarea>
</div>

<!-- RUBRICS -->
<div class="card">
    <h2>Extracted Rubrics</h2>
    <div id="rubrics"></div>
</div>

<!-- REMEDY DIFFERENTIATION -->
<div class="card">
    <h2>Suggested Remedy Differentiation</h2>
    <div id="remedySuggestions"></div>
</div>

<div class="card">
    <h2>Doctor Notes</h2>
    <textarea placeholder="Clinical observations..."></textarea>
</div>

<div class="card">
    <h2>Finalize Prescription</h2>
    <label>Remedy</label><input type="text" id="finalRemedy">
    <label>Potency</label>
    <select id="potency">
        <option>30C</option><option>200C</option><option>1M</option>
    </select>
    <label>Dose</label><textarea id="dose"></textarea>
    <button class="btn" onclick="approveCase()">Approve & Create Case File</button>
</div>

</div>

<script>
const answers = JSON.parse(localStorage.getItem("aiCaseData")) || [];
const container = document.getElementById("aiAnswers");

answers.forEach(item => {
    const div = document.createElement("div");
    div.className = "case-answer";
    div.innerHTML = `<strong>Q:</strong> ${item.question}<br><strong>A:</strong> ${item.answer}`;
    container.appendChild(div);
});

// AUTO SUMMARY
chief.value = answers[0]?.answer || "";
modalities.value = (answers[4]?.answer || "") + " | Better: " + (answers[5]?.answer || "");
physical.value = answers[6]?.answer || "";
mental.value = answers[8]?.answer || "";

// RUBRIC EXTRACTION (DEMO AI LOGIC)
const rubricBox = document.getElementById("rubrics");
const rubricList = ["Head pain â€“ throbbing", "Worse motion", "Better rest", "Thirstless", "Emotional sensitivity"];
rubricList.forEach(r => {
    const span = document.createElement("span");
    span.className = "rubric";
    span.innerText = r;
    rubricBox.appendChild(span);
});

// REMEDY DIFFERENTIATION (DEMO)
const remedyBox = document.getElementById("remedySuggestions");
const remedies = [
    {name:"Bryonia", notes:"Worse motion, better rest, dryness"},
    {name:"Pulsatilla", notes:"Thirstless, emotional, better company"},
    {name:"Nat Mur", notes:"Reserved, grief history, headaches"}
];
remedies.forEach(r => {
    const div = document.createElement("div");
    div.className = "remedy-box";
    div.innerHTML = `<strong>${r.name}</strong><br>${r.notes}`;
    remedyBox.appendChild(div);
});

// APPROVE CASE
function approveCase() {
    const caseFile = {
        patient: "Riya Patel",
        remedy: finalRemedy.value,
        potency: potency.value,
        dose: dose.value,
        summary: chief.value
    };

    let allCases = JSON.parse(localStorage.getItem("patientCases")) || [];
    allCases.push(caseFile);
    localStorage.setItem("patientCases", JSON.stringify(allCases));

    // Notify doctor dashboard
    localStorage.setItem("doctorNotification", "New AI case approved and added");

    alert("Case moved to patient file successfully!");
}
</script>

</body>
</html>
