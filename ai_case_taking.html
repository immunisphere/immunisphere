<!DOCTYPE html>
<html>
<head>
<title>AI Homeopathic Case Taking</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body { font-family: Arial; background:#e5ddd5; margin:0; }
.header {
    background:#2bb673; color:white; padding:15px;
    text-align:center; font-weight:bold;
}
.chatbox {
    max-width:600px; margin:auto;
    display:flex; flex-direction:column;
    height:85vh; padding:10px;
}
.messages { flex:1; overflow-y:auto; display:flex; flex-direction:column; }
.msg {
    margin:8px 0; padding:10px 14px;
    border-radius:18px; max-width:75%;
}
.ai { background:white; align-self:flex-start; }
.user { background:#dcf8c6; align-self:flex-end; }
.chat-input { display:flex; gap:5px; padding:10px; background:white; }
input {
    flex:1; padding:10px; border-radius:20px; border:1px solid #ccc;
}
button {
    padding:10px 14px; border-radius:50%;
    background:#2bb673; color:white; border:none; font-size:16px;
}
</style>
</head>
<body>

<div class="header">ðŸ¤– AI Homeopathic Case Taking</div>

<div class="chatbox">
    <div class="messages" id="chat"></div>

    <div class="chat-input">
        <input type="text" id="userInput" placeholder="Type your answer...">
        <button onclick="sendAnswer()">âž¤</button>
    </div>
</div>

<script>
const questions = [
"Hello ðŸ‘‹ Iâ€™ll ask a few questions to understand your health better. What is your main complaint?",
"When did this problem start?",
"Can you describe the sensation (burning, throbbing, stitching, dull, etc.)?",
"What makes it worse?",
"What makes it better?",
"Do you feel more affected by heat or cold?",
"How is your thirst? More, less, or normal?",
"Any particular food cravings or dislikes?",
"How would you describe your emotional nature?",
"Do you prefer company or being alone when unwell?",
"How is your sleep?",
"Do you have any fears, anxieties, or recurring thoughts?",
"Thank you ðŸŒ¿ Our AI has gathered your case. A doctor will review it shortly."
];

let step = 0;
let answers = [];

function addMessage(text, sender) {
    const msg = document.createElement("div");
    msg.className = "msg " + sender;
    msg.innerText = text;
    document.getElementById("chat").appendChild(msg);
    msg.scrollIntoView();
}

function askQuestion() {
    if (step < questions.length) {
        setTimeout(() => addMessage(questions[step], "ai"), 500);
    } else {
        // Save case data for doctor review
        localStorage.setItem("aiCaseData", JSON.stringify(answers));
        setTimeout(() => {
            window.location.href = "ai-case-review.html";
        }, 1500);
    }
}

function sendAnswer() {
    const input = document.getElementById("userInput");
    const text = input.value.trim();
    if (!text) return;

    addMessage(text, "user");

    answers.push({
        question: questions[step],
        answer: text
    });

    input.value = "";
    step++;
    askQuestion();
}

// Start first question
askQuestion();

// Enter key support
document.getElementById("userInput").addEventListener("keypress", function(e){
    if (e.key === "Enter") sendAnswer();
});
</script>

</body>
</html>
